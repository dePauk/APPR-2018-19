---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Darjan Pavšič"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
    
    #runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding="UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, echo=FALSE, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

## Igralci tedna in uspešnost njihovih ekip v ligi NBA

V projektu bom analiziral igralce tedna ("Player of the Week") lige NBA v sezonah od 1984/85 do 2017/18 glede na njihovo pozicijo, višino, število sezon v ligi in podobne spremenljivke. Poskušal bom ugotoviti, kako močna je korelacija med številom osvojenih nazivov igralca tedna posamezne ekipe in številom oziroma odstotkom dobljenih tekem teh ekip v istem obdobju. Raziskal bom kako se je pomembnost določenih pozicij spreminjala tekom sezon, saj vemo da se je v zadnjih desetletjih (oziroma celo letih) način igranja v ligi NBA opazno spremenil ter napovedal pomembnost centrov v prihodnosti. Ogledal si bom tudi zvezne države, ki so prejele največ nazivov.

***

![](slike/nba-r.jpg)


# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvoz.r", encoding="UTF-8")
```

Uvozil sem podatke o igralcih tedna v sezonah od 1984/85 do 2017/18 v obliki CSV s spletne strani Kaggle. V obliki HTML sem s spletne strani mcubed.net uvozil statistiko NBA ekip v tem obdobju ter podatke o stastistiki igralcev Jamesa Hardena in Stephena Currya iz Wikipedije. Podatki so v razpredelnicah v obliki *tidy data*.


1. 'podatki_ekipe_imensko'

  - `Ekipa` - spremenljivka: ime ekipe
  - `Zmage_redni_del` - spremenljivka: število zmag v rednem delu
  - `Porazi_redni_del` - spremenljivka: število porazov v rednem delu
  - `Uspesnost_redni_del` - spremenljivka: delež zmaganih tekem v rednem delu
  - `Stevilo_playoffov` - spremenljivka: število uvrstitev v končnico oziroma "Play-off"
  - `Playoff_zmage` - spremenljivka: število zmag v končnici
  - `Playoff_porazi` - spremenljivka: število porazov v končnici
  - `Playoff_uspesnost` - spremenljivka: delež zmaganih tekem v končnici
  - `Zmage_serij` - spremenljivka: število premaganih nasprotnikov v Play-offih, tj. uvrstitev v naslednji krog končnice
  - `Porazi_serij` - spremenljivka: število izgubljenih serij, tj. izpadov iz končnice
  - `Uspesnost_serij` - spremenljivka: delež zmaganih serij
  - `Nastopi_finale` - spremenljivka: število nastopov v finalih, tj. zmag svoje konference
  - `Zmage_finale` - spremenljivka: število osvojenih nazivov zmagovalca lige
  - `Kratice` - okrajšano ime ekipe
  

2. 'igralci_tedna'

  - `Starost` - spremenljivka: starost igralca
  - `Konferenca` - spremenljivka: vzhod/zahod
  - `Leto_drafta` - spremenljivka: leto, v katerem je bil igralec draftan v ligo
  - `Visina` - spremenljivka: višina igralca
  - `Ime` - spremenljivka: ime igralca
  - `Pozicija` - spremenljivka: pozicija igranja
  - `Sezona okrajsano` - spremenljivka: letnica zaključka sezone, npr. za sezono 1991/92 bo vrednost 1992
  - `Stevilo_sezon_v_ligi` - spremenljivka: število odigranih sezon pred začetkom trenutne, torej v tej sezoni draftani igralci imajo vrednost 0
  - `Igralceva_ekipa` - spremenljivka: ekipa, v kateri igra
  - `Vrednost_naziva` - spremenljivka: 0.5 za sezone, kjer se naziv dodeli po enemu igralcu iz vsake konference oz. 1 za sezone, kjer se naziv dodeli enemu igralcu iz celotne lige


3. 'tabela_harden' in 4. 'tabela_curry'

 - `Year` - spremenljivka: letnica zaključka sezone
 - `GP` - spremenljivka: število odigranih tekem
 - `GS` - spremenljivka: število začetih tekem
 - `MPG` - spremenljivka: povprečno število odigranih minut na tekmo
 - `FG%` - spremenljivka: delež zadetih metov iz igre
 - `3P%` - spremenljivka: delež zadetih metov za 3 točke
 - `FT%` - spremenljivka: delež zadetih prostih metov
 - `RPG` - spremenljivka: povp. število skokov na tekmo
 - `APG` - spremenljivka: povp. število asistenc na tekmo
 - `SPG` - spremenljivka: povp. število ukradenih žog na tekmo
 - `PPG` - spremenljivka: povp. število točk na tekmo
 - `P_WEEK` - spremenljivka: število nazivov igralca tedna v sezoni
 - `Name` - spremenljivka: ime igralca

  
Opomba: Nekatere tabele, uporabljene pri vizualizaciji in analizi, sem pridobil iz zgornjih tabel.


```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding="UTF-8")
```






```{r graf_zda, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Število naslovov igralca tedna po zveznih državah'}
print(graf_zda)

```




Spodnji graf prikazuje uspešnost ekip v rednem delu VS uspešnost ekip v Play-Offih. Velikost kroga pomeni število uvrstitev v Play-offe.

```{r graf_korelacija_uspesn, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Uspešnost ekip v rednem delu VS uspešnost ekip v Play-Offih'}
print(graf_korelacija_uspesn)

```





```{r graf_sezone, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Število nazivov glede na število sezon v ligi NBA'}
print(graf_sezone)

```






```{r graf_visina_pozicija, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Višina igralcev glede na pozicijo igranja'}
print (graf_visina_pozicija)

```




```{r graf_pozicije_cas, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Osvajanje nazivov igralca tedna glede na pozicijo skozi čas'}
print(graf_pozicije_cas)

```


```{r graf_napoved, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Napoved za centre'}
print(graf_napoved)

```




```{r graf_harden_curry2, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Primerjava in napoved za dva igralca'}
print (graf_harden_curry2)

```



```{r graf_zmage_nazivi, echo=FALSE, message=FALSE, fig.align='center', fig.cap='Število zmag vs Število osvojenih nazivov igralca tedna po ekipah'}
print (graf_zmage_nazivi)

```


 

